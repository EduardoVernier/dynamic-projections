<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Replication"><meta property="og:description" content="Replication FIrst clone this repo: https://github.com/EduardoVernier/dynamic-projections
Recreating the results / Testing new methods and datasets Set up virtual env and dependencies using pipenv. https://pipenv.readthedocs.io/en/latest/
pip install pipenv pipenv run pip install pip==18.0 pipenv install sudo apt-get install python3-tk  To run a script use pipenv run python &lt;script_name&gt;.py. To open notebooks use pipenv run jupyter notebook or create a new shell with pipenv shell and then call jupyter notebook."><meta property="og:type" content="article"><meta property="og:url" content="https://eduardovernier.github.io/dynamic-projections/docs/projections/replication/"><title>Replication | Dynamic projections</title><link rel=icon href=/dynamic-projections/favicon.png type=image/x-icon><link rel=stylesheet href=/dynamic-projections/book.min.e095d2fc282039b2e0a50cefad944330a73f934c3bd2b9272bb3fdfeb8f4f34d.css integrity="sha256-4JXS/CggObLgpQzvrZRDMKc/k0w70rknK7P9/rj0800="></head><body><input type=checkbox class=hidden id=menu-control><main class="flex container"><aside class="book-menu fixed"><nav><h2 class=book-brand><a href=https://eduardovernier.github.io/dynamic-projections/><span>Dynamic projections</span></a></h2><ul><li class=book-section-flat><a href=/dynamic-projections/docs/projections/exp-setup/>Experimental setup</a><ul><li><a href=/dynamic-projections/docs/projections/exp-setup/algorithms/>Algorithms</a></li><li><a href=/dynamic-projections/docs/projections/exp-setup/datasets/>Datasets</a></li><li><a href=/dynamic-projections/docs/projections/exp-setup/metrics/>Metrics</a></li></ul></li><li class=book-section-flat><a href=/dynamic-projections/docs/projections/results/>Results</a><ul><li><a href=/dynamic-projections/docs/projections/results/raw-output/>Raw output</a></li><li><a href=/dynamic-projections/docs/projections/results/videos-and-trails/>Videos and Trails</a></li></ul></li><li><a href=/dynamic-projections/docs/projections/replication/ class=active>Replication</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class="flex align-center justify-between book-header"><label for=menu-control><img src=/dynamic-projections/svg/menu.svg alt=Menu></label>
<strong>Replication</strong></header><article class=markdown><h1 id=replication>Replication</h1><p>FIrst clone this repo: <a href=https://github.com/EduardoVernier/dynamic-projections>https://github.com/EduardoVernier/dynamic-projections</a></p><h2 id=recreating-the-results-testing-new-methods-and-datasets>Recreating the results / Testing new methods and datasets</h2><p>Set up virtual env and dependencies using pipenv. <a href=https://pipenv.readthedocs.io/en/latest/>https://pipenv.readthedocs.io/en/latest/</a></p><pre><code>pip install pipenv
pipenv run pip install pip==18.0
pipenv install
sudo apt-get install python3-tk
</code></pre><p>To run a script use <code>pipenv run python &lt;script_name&gt;.py</code>. To open notebooks use <code>pipenv run jupyter notebook</code> or create a new shell with <code>pipenv shell</code> and then call <code>jupyter notebook</code>.</p><h3 id=generating-the-projections>Generating the projections</h3><p><strong>Autoencoders</strong> &mdash; <code>./Models/ae</code>
The notebooks should contain information about training total time and performance metric (training/test accuracy and loss). The <code>Shared.py</code> file contains methods that might be useful for all notebooks and projection techniques e.g., saving projection, loading data.</p><p><strong>Dynamic/static t-sne</strong> &mdash; <code>./Models/tsne</code>
From the root folder, we need to add the <code>tsne</code> folder to the PYTHONPATH and then run the dtsne_wrapper script.</p><pre><code>export PYTHONPATH=${PYTHONPATH}:${PWD}/Models/tsne
python Models/tsne/dtsne_wrapper.py ./Datasets/gaussians 70 0.1
</code></pre><p>The default options are <code>n_epochs=200, sigma_iters=50</code>.</p><p>For static t-sne with strategies 1 and 4 (of the dt-sne paper):</p><pre><code>export PYTHONPATH=${PYTHONPATH}:${PWD}/Models/tsne
python Models/tsne/tsne_s1.py ./Datasets/gaussians 70  # or
python Models/tsne/tsne_s4.py ./Datasets/gaussians 70
</code></pre><p><strong>Principal component analysis</strong> &mdash; <code>./Models/pca</code></p><pre><code>export PYTHONPATH=${PYTHONPATH}:${PWD}/Models/
python Models/pca/pca_s1.py ./Datasets/gaussians  # or
python Models/pca/pca_s4.py ./Datasets/gaussians
</code></pre><p><strong>Formatting</strong></p><p><strong>Image datasets</strong> &ndash; The directory hierarchy doesnâ€™t matter, all the metadata should be contained in the file name. <code>&lt;class&gt;-&lt;id&gt;-&lt;time&gt;.png</code>, e.g. <code>airplane-1234-10.png</code> &ndash; 10th revision of airplane with id 1234.</p><p><strong>Tabular datasets</strong> &ndash; Each timestep is a single csv file named <code>&lt;dataset_name&gt;-&lt;time&gt;.csv</code>. The first column is the id and the next are the n features. I think this dtsne implementation only handles numerical features, so nothing categorical here for now.</p><p><strong>Output data (actual projections)</strong> &mdash; <code>./Output</code> -
Single csv file with information about the model in the name in the format <code>&lt;dataset&gt;-&lt;model_info&gt;.csv</code>, as in <code>quickdraw-AE_728c_200c_p_d_200f_500f_2f.csv</code>. The previous string is an hypothetical filename for the results of projection using an AE with two convolutional layers of 728 and 200 kernels each, followed by max pooling and dropout layers and three dense layers of 200, 500 and 2 neurons each. As for the contents of the file, the first column is the <code>id</code>, and the next are <code>t0d0, t0d1, ... t0dX, t1d0, ..., tTdX.</code> The number &rsquo;t&rsquo; is the timestep and &rsquo;d&rsquo; is the representation dimension of each value.</p><h3 id=visualizing-the-projections>Visualizing the projections</h3><p>There is a simple python tool based on matplotlib to quickly show and help us debug the generated projections. To use it, call</p><pre><code>python Vis/Main.py ./Output/gaussians-pca_s4.csv ./Output/gaussians-AE_10f_2f_20ep.csv
python Vis/Main.py $(find Output/ -type f -name cartolastd*)
</code></pre><h3 id=computing-the-metrics>Computing the metrics</h3><p>The code for the metrics is located in a notebook called <code>template.ipynb</code>. For each dataset we use a tool called Papermill to instantiate a new notebook from the template. The two parameters that are needed are the output notebook path (remember to change name to dataset_id) and the list of output/projection files we want to analyse. This is the code that generates the analysis for the gaussians dataset:</p><pre><code>papermill Metrics/template.ipynb ./Metrics/gaussians.ipynb --log-output -p projection_paths 'Output/gaussians-AE_10f_10f_2f_20ep.csv Output/gaussians-AE_10f_2f_20ep.csv Output/gaussians-tsne_s1_70p.csv Output/gaussians-tsne_s4_70p.csv Output/gaussians-dtsne_70p_0-1l.csv Output/gaussians-pca_s1.csv Output/gaussians-pca_s4.csv'
</code></pre><p>The results are written in a csv file that goes into the <code>./Metrics/Results</code> directory.
To check the (tqdm) progress see the <code>log_&lt;dataset_id&gt;</code> file in real time.</p><h3 id=generating-videos>Generating videos</h3><pre><code>papermill Plots/trails-video.ipynb Plots/temp.ipynb --log-output -p dataset_id gaussians
</code></pre><h3 id=ploting-static-trail-viz>Ploting static trail viz</h3><pre><code>papermill Plots/trails-image.ipynb Plots/temp.ipynb --log-output -p dataset_id gaussians
</code></pre><h3 id=plotting-the-metric-results>Plotting the metric results</h3><p>Simply run the <code>Plots/plots.ipynb</code> notebook.</p><h3 id=datasets>Datasets</h3><p>The notebooks and files that generated the datasets are available at <a href=https://drive.google.com/drive/u/1/folders/1MXJK2mqH015pAohuBawVIQeqgB38JAsy>https://drive.google.com/drive/u/1/folders/1MXJK2mqH015pAohuBawVIQeqgB38JAsy</a>.</p></article></div><aside class="book-toc levels-6 fixed"><nav id=TableOfContents><ul><li><a href=#replication>Replication</a><ul><li><a href=#recreating-the-results-testing-new-methods-and-datasets>Recreating the results / Testing new methods and datasets</a><ul><li><a href=#generating-the-projections>Generating the projections</a></li><li><a href=#visualizing-the-projections>Visualizing the projections</a></li><li><a href=#computing-the-metrics>Computing the metrics</a></li><li><a href=#generating-videos>Generating videos</a></li><li><a href=#ploting-static-trail-viz>Ploting static trail viz</a></li><li><a href=#plotting-the-metric-results>Plotting the metric results</a></li><li><a href=#datasets>Datasets</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>